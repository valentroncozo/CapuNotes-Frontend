 {/* POPUP 츼REA */}
      {showPopupArea && (
        <GenericEditPopup
          isOpen={showPopupArea}
          onClose={() => setShowPopupArea(false)}
          entityName="츼rea"
          schema={areaSchema}
          entity={{}}
          onSave={async (values) => {
            try {
              // Validaci칩n local (igual que antes)
              if (!values.nombre?.trim() || !values.descripcion?.trim()) {
                return Swal.fire({
                  icon: "warning",
                  title: "Campos incompletos",
                  text: "Deb칠s completar nombre y descripci칩n.",
                  background: "#11103a",
                  color: "#E8EAED",
                  confirmButtonColor: "#DE9205",
                  confirmButtonText: "Aceptar",
                });
              }

              // Crear el 치rea (el backend devuelve el id)
              const nueva = await areasService.create({
                nombre: values.nombre,
                descripcion: values.descripcion,
              });


              // Recargar lista de 치reas
              await cargarListas();

              // Seleccionar autom치ticamente el 치rea reci칠n creada
              setMiembro((prev) => ({
                ...prev,
                area: nueva.id,
              }));

              Swal.fire({
                icon: "success",
                title: "츼rea creada",
                timer: 1500,
                showConfirmButton: false,
                background: "#11103a",
                color: "#E8EAED",
              });

              setShowPopupArea(false);
            } catch (err) {
              const msg = String(err.response?.data || "").trim();

              // 游댠 Detectar duplicado EXACTO del backend:
              // "Ya existe un 치rea con el nombre 'Marketing'"
              if (msg.startsWith("Ya existe un 치rea con el nombre")) {
                return Swal.fire({
                  icon: "warning",
                  title: "Duplicado",
                  text: "Ya existe dicha 치rea",
                  background: "#11103a",
                  color: "#E8EAED",
                  confirmButtonColor: "#DE9205",
                  confirmButtonText: "Aceptar",
                });
              }

              Swal.fire({
                icon: "error",
                title: "Error",
                text: "No se pudo crear el 치rea.",
                background: "#11103a",
                color: "#E8EAED",
                confirmButtonColor: "#DE9205",
                confirmButtonText: "Aceptar",
              });
            }
          }}
        />
      )}